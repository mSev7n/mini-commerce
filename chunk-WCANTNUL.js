import{a as F,b as N,e as R,g as D,h as L,j as $,k as j}from"./chunk-LL5KZJH4.js";import{A as b,B as _,F as h,I as v,K as o,L as a,M as y,N as w,O as x,P as c,R as s,S,T as I,U as k,V as Q,W as M,X as V,a as f,b as g,da as E,fa as T,na as q,pa as A,r as p,s as d,x as C,y as l}from"./chunk-34NIGZ72.js";function O(m,r){if(m&1){let t=w();o(0,"div",4),y(1,"img",5),o(2,"div",6)(3,"h2",7),s(4),a(),o(5,"p",8),s(6),a(),o(7,"p",9),s(8),a(),o(9,"div",10)(10,"input",11),V("ngModelChange",function(n){let i=p(t).$implicit,u=c();return M(u.removeQuantities[i.product.slug],n)||(u.removeQuantities[i.product.slug]=n),d(n)}),a(),o(11,"button",12),x("click",function(){let n=p(t).$implicit,i=c();return d(i.updateQuantity(n))}),s(12," Update "),a(),o(13,"button",13),x("click",function(){let n=p(t).$implicit,i=c();return d(i.removeQuantity(n))}),s(14," Remove quantity "),a(),o(15,"button",14),x("click",function(){let n=p(t).$implicit,i=c();return d(i.removeAll(n.product.slug))}),s(16," Remove all "),a()()()()}if(m&2){let t=r.$implicit,e=c();l(),v("src",t.product.image,C)("alt",t.product.title),l(3),S(t.product.title),l(2),k("\u20A6",t.product.price," x ",t.quantity,""),l(2),I("\u20A6",t.product.price*t.quantity,""),l(2),Q("ngModel",e.removeQuantities[t.product.slug])}}var B=class m{constructor(r){this.cartService=r;this.cartService.cart$.subscribe(t=>{this.cartItems=t,this.calculateTotals()})}cartItems=[];subtotal=0;total=0;removeQuantities={};calculateTotals(){this.subtotal=this.cartItems.reduce((r,t)=>r+t.product.price*t.quantity,0),this.total=this.subtotal}removeQuantity(r){let t=r.product.slug,e=this.removeQuantities[t];if(!e||e<1)return;let n=this.cartItems.map(i=>{if(i.product.slug===t){let u=i.quantity-e;return u>0?g(f({},i),{quantity:u}):null}return i}).filter(Boolean);this.cartService.updateCart(n),this.removeQuantities[t]=1}removeAll(r){let t=this.cartItems.filter(e=>e.product.slug!==r);this.cartService.updateCart(t),this.removeQuantities[r]=1}updateQuantity(r){let t=r.product.slug,e=this.removeQuantities[t];if(!e||e<1)return;let n=this.cartItems.map(i=>i.product.slug===t?g(f({},i),{quantity:e}):i);this.cartService.updateCart(n)}static \u0275fac=function(t){return new(t||m)(b(j))};static \u0275cmp=_({type:m,selectors:[["app-cart"]],decls:6,vars:1,consts:[[1,"flex","flex-col","sm:flex-row","justify-between","items-center","gap-2","mt-4","mb-6","px-4"],["routerLink","/",1,"w-full","sm:w-auto","text-center","px-4","py-2","bg-blue-600","text-white","text-sm","rounded-full","shadow-sm","hover:bg-blue-700","transition-all","duration-200"],["routerLink","/checkout",1,"w-full","sm:w-auto","text-center","px-4","py-2","bg-green-600","text-white","text-sm","rounded-full","shadow-sm","hover:bg-green-700","transition-all","duration-200"],["class","flex flex-col sm:flex-row gap-4 items-start sm:items-center border-b pb-4 mt-4 px-4",4,"ngFor","ngForOf"],[1,"flex","flex-col","sm:flex-row","gap-4","items-start","sm:items-center","border-b","pb-4","mt-4","px-4"],[1,"w-24","h-24","object-cover","rounded",3,"src","alt"],[1,"flex-1","w-full"],[1,"text-base","sm:text-lg","font-medium"],[1,"text-sm","text-gray-500"],[1,"text-sm","font-semibold","mt-1"],[1,"flex","flex-wrap","items-center","gap-2","mt-2"],["type","number","min","1","placeholder","Qty",1,"w-20","px-2","py-1","border","rounded","text-sm",3,"ngModelChange","ngModel"],[1,"px-3","py-1","text-sm","bg-blue-100","text-blue-700","rounded","hover:bg-blue-200",3,"click"],[1,"px-3","py-1","text-sm","bg-red-100","text-red-700","rounded","hover:bg-red-200",3,"click"],[1,"px-3","py-1","text-sm","bg-red-600","text-white","rounded","hover:bg-red-700",3,"click"]],template:function(t,e){t&1&&(o(0,"div",0)(1,"a",1),s(2," \u2190 Back to Shop "),a(),o(3,"a",2),s(4," Go to Checkout \u2192 "),a()(),h(5,O,17,7,"div",3)),t&2&&(l(5),v("ngForOf",e.cartItems))},dependencies:[T,E,A,q,$,F,D,N,L,R],encapsulation:2})};export{B as CartComponent};
