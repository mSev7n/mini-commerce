import{a as q,b as A,c as O,d as W,e as j,f as P,i as R,j as D,k as B}from"./chunk-LL5KZJH4.js";import{A as g,B as h,F as _,I as c,K as t,L as i,M as y,N as S,O as w,P as d,Q as I,R as n,S as M,T as f,U as k,V as x,W as b,X as v,da as E,ea as F,fa as N,ma as T,pa as V,r as u,s as p,x as C,y as r}from"./chunk-34NIGZ72.js";function z(a,l){a&1&&(t(0,"div",6),n(1," Your cart is empty. "),i())}function G(a,l){if(a&1&&(t(0,"div",7)(1,"div",8),y(2,"img",9),t(3,"div")(4,"p",10),n(5),i(),t(6,"p",11),n(7),i()()(),t(8,"div",12),n(9),i()()),a&2){let e=l.$implicit;r(2),c("src",e.product.image,C)("alt",e.product.title),r(3),M(e.product.title),r(2),k(" \u20A6",e.product.price," x ",e.quantity," "),r(2),f(" \u20A6",e.product.price*e.quantity," ")}}function U(a,l){if(a&1){let e=S();t(0,"div",13)(1,"form",14,0),w("ngSubmit",function(){u(e);let m=d();return p(m.placeOrder())}),t(3,"div")(4,"label",15),n(5," Full Name "),i(),t(6,"input",16),v("ngModelChange",function(m){u(e);let s=d();return b(s.name,m)||(s.name=m),p(m)}),i()(),t(7,"div")(8,"label",17),n(9," Email Address "),i(),t(10,"input",18),v("ngModelChange",function(m){u(e);let s=d();return b(s.email,m)||(s.email=m),p(m)}),i()(),t(11,"div",19)(12,"p",20),n(13," Subtotal: "),t(14,"strong"),n(15),i()(),t(16,"p",21),n(17," Total: "),t(18,"strong"),n(19),i()(),t(20,"button",22),n(21," Place Order \u2192 "),i()()()()}if(a&2){let e=I(2),o=d();r(6),x("ngModel",o.name),r(4),x("ngModel",o.email),r(5),f("\u20A6",o.subtotal.toFixed(2),""),r(4),f("\u20A6",o.total.toFixed(2),""),r(),c("disabled",!e.form.valid)}}var L=class a{constructor(l,e){this.cartService=l;this.router=e;this.cartService.cart$.subscribe(o=>{this.cartItems=o,this.calculateTotals()})}cartItems=[];subtotal=0;total=0;name="";email="";calculateTotals(){this.subtotal=this.cartItems.reduce((l,e)=>l+e.product.price*e.quantity,0),this.total=this.subtotal}placeOrder(){this.cartService.clearCart(),localStorage.setItem("user-name",this.name),localStorage.setItem("user-email",this.email);let l=Math.floor(1e5+Math.random()*9e5);this.router.navigate(["/success"],{queryParams:{orderId:l}})}static \u0275fac=function(e){return new(e||a)(g(B),g(T))};static \u0275cmp=h({type:a,selectors:[["app-checkout"]],decls:6,vars:3,consts:[["checkoutForm","ngForm"],[1,"p-4","max-w-3xl","mx-auto"],[1,"text-2xl","font-bold","mb-4"],["class","text-gray-500",4,"ngIf"],["class","mb-4 flex flex-col sm:flex-row justify-between items-start sm:items-center border-b pb-4 gap-4",4,"ngFor","ngForOf"],["class","mt-6 border-t pt-4",4,"ngIf"],[1,"text-gray-500"],[1,"mb-4","flex","flex-col","sm:flex-row","justify-between","items-start","sm:items-center","border-b","pb-4","gap-4"],[1,"flex","flex-col","sm:flex-row","gap-4","w-full"],[1,"w-20","h-20","object-cover","rounded","self-start",3,"src","alt"],[1,"text-base","sm:text-lg","font-medium"],[1,"text-sm","text-gray-500"],[1,"font-semibold","self-end","sm:self-auto"],[1,"mt-6","border-t","pt-4"],[1,"space-y-4","mb-6",3,"ngSubmit"],["for","name",1,"block","text-sm","font-medium","mb-1"],["type","text","id","name","name","name","required","",1,"w-full","border","px-3","py-2","rounded","focus:outline-none","focus:ring","focus:border-indigo-500",3,"ngModelChange","ngModel"],["for","email",1,"block","text-sm","font-medium","mb-1"],["type","email","id","email","name","email","required","",1,"w-full","border","px-3","py-2","rounded","focus:outline-none","focus:ring","focus:border-indigo-500",3,"ngModelChange","ngModel"],[1,"text-right","border-t","pt-4"],[1,"mb-2"],[1,"mb-4"],["type","submit",1,"bg-green-600","text-white","px-4","py-2","rounded","hover:bg-green-700","transition",3,"disabled"]],template:function(e,o){e&1&&(t(0,"div",1)(1,"h1",2),n(2,"Checkout"),i(),_(3,z,2,0,"div",3)(4,G,10,6,"div",4)(5,U,22,5,"div",5),i()),e&2&&(r(3),c("ngIf",o.cartItems.length===0),r(),c("ngForOf",o.cartItems),r(),c("ngIf",o.cartItems.length>0))},dependencies:[N,E,F,V,D,P,q,A,O,R,j,W],encapsulation:2})};export{L as CheckoutComponent};
